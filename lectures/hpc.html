<section>
    <h2>Parallel processing and HPC</h2>
    <h4 style="margin-top: 0.5em">
    Anna Petrasova, Vaclav Petras, Helena Mitasova</h4>
    <p class="title-foot">
        GIS714 Geosimulations
    </p>
</section>


<section>
<h3>Parallelization in geospatial context</h3>
<ul>
<li>Just because your computer has many CPUs, that doesn't mean
a computation uses them</li>
<li>Implementing parallel computing with CPUs can be done on the level of algorithm or user level</li>
</ul>
<br>
<img width="50%" src="img/hpc/CPUs.png">
</section>

<section>
<h3>Parallelization approaches in geospatial context</h3>
<ul>
<li><em>Embarassingly parallel problems</em> &mdash;  independent computations (e.g., solar radiation for more days)</li>
<li class="fragment" data-fragment-index="1"><em>Tiling approach</em> &mdash; divide spatial domain into tiles possibly with overlaps (e.g., interpolation)</li>
<li class="fragment" data-fragment-index="2"><em>Complex approaches</em> &mdash; depend on algorithms, often use tiling with communication between tiles (e.g., hydrology)</li>
</ul>
<iframe style="margin-bottom:30px" width="280" height="157" src="https://www.youtube.com/embed/eK6dWivro1g?rel=0&amp;controls=0&amp;showinfo=0;loop=1;playlist=eK6dWivro1g" frameborder="0" allow="encrypted-media" data-autoplay></iframe>
<img style="margin-left:30px;margin-right:30px" width="250px" src="img/hpc/tiling.jpg"  class="fragment" data-fragment-index="1">
<img width="300px" src="img/diffusion_flows/fanimhhcolp.gif"  class="fragment" data-fragment-index="2">
</section>

<section>
<h3>Notes on parallelization</h3>
<p style="text-align: left"> Good news:
<ul >
<li>Many problems fall into first two categories</li>
<li>It's fairly easy for users to parallelize their computations
using Python, or background processing</li>
</ul></p>
<p class="fragment" style="text-align: left"> Problems:
<ul class="fragment">
<li>Overhead can cause a program to run slower than on one CPU (running on <em>n</em> CPUs does not mean <em>n</em>-times speed-up)</li>
<li>We might not have enough memory for all processes</li>
</ul></p>
</section>


<section>
<h3>Parallel computing infrastructure (1)</h3>
<ul>
<li>laptop (8 CPUs) &mdash; for individuals</li>
<li class="fragment" data-fragment-index="1">desktop/server (tens of CPUs)
<ul>
<li>typically remote access, but physical machine is accessible</li>
<li> hardware owned by organizations, companies</li>
</ul>
</li>
</ul>
<img class="fragment" data-fragment-index="1" height="300px" src="img/hpc/server.png">
</section>

<section>
<h3>Parallel computing infrastructure (2)</h3>
<ul>
<li>cloud (tens of CPUs)
  <ul>
     <li>connected computers, actual hardware/OS hidden through virtualization</li>
     <li>easy to setup from user point of view</li>
     <li>computing is often not the primary application</li>
     <li>e.g., <a href="https://vcl.ncsu.edu/">NCSU VCL</a>, Amazon Web Services </li>
  </ul>
</ul>
<img class="stretch" src="img/hpc/vcl1.png">
</section>

<section>
<h3>Parallel computing infrastructure (3)</h3>
<ul>
<li>HPC, supercomputers (thousands of CPUs) 
  <ul>
      <li>connected nodes, unix-based OS (e.g., Linux)</li>
      <li>not all programs can take advantage of it</li>
      <li>e.g., <a href="https://projects.ncsu.edu/hpc/main.php">NCSU HPC: Henry2</a></li>
  </ul>
</li>
</ul>
<img class="stretch" src="img/hpc/supercomputer.jpg">
<p class="small"> Supercomputer Blue Waters, NCSA, Illinois</p>
</section>

<section>
    <h3>When to use HPC?</h3>
    <ul>
    <li>Computation takes a looong time (hours/days) on your machine.</li>
    <li>Computation requires more memory than you have (e.g., more than 32GB)</li>
    <li>Computation uses big data from Research storage</li>
    <li>When you don't want to overheat your hardware</li>
    <li>When your computation takes advantage of many cores</li>
    </ul>
</section>

<section>
    <h3>When not to use HPC?</h3>
    <ul>
    <li>long running script accessing internet</li>
    <li>prototyping workflow</li>
    <li>when you use software that is not available on HPC (e.g., non-open source software)</li>
    </ul>
</section>






